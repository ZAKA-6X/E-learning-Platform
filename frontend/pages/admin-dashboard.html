<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ClicaEd — Tableau de bord</title>

  <link rel="icon" type="image/png" href="../assets/icon.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="stylesheet" href="../css/dashboard.css" />

  <meta name="description" content="Plateforme ClicaEd — gestion scolaire (utilisateurs, cours, présence, communication, rapports).">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <!-- En-tête -->
  <header class="header" role="banner">
    <div class="header-brand">
      <button class="mobile-nav-toggle" type="button">
        <span class="sr-only">Ouvrir le menu</span>
        <i class="fa-solid fa-bars" aria-hidden="true"></i>
      </button>
      <div class="logo">
        <img src="../assets/logo.png" alt="Logo ClicaEd" />
        <span>ClicaEd</span>
      </div>
    </div>
    <div class="search-bar" role="search">
      <input type="text" placeholder="Recherche Clica" aria-label="Rechercher"/>
    </div>
    <div class="user-menu" role="group" aria-label="Menu utilisateur">
      <button class="action-button" type="button" id="btn-creer" data-open="publications">
        <i class="fas fa-plus"></i> Créer
      </button>
      <button class="action-button" type="button">Formation</button>
      <div
        class="user-menu-trigger"
        data-user-menu
        data-profile-url="/pages/profile.html"
      >
        <button
          type="button"
          class="user-avatar"
          title="Mon compte"
          data-user-menu-toggle
          aria-haspopup="true"
          aria-expanded="false"
        >
          U
        </button>
        <div
          class="user-menu-panel"
          data-user-menu-panel
          role="menu"
          aria-label="Actions utilisateur"
          hidden
        >
          <button type="button" class="user-menu-item" data-action="profile" role="menuitem">
            Profil
          </button>
          <button type="button" class="user-menu-item" data-action="logout" role="menuitem">
            Déconnexion
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Conteneur principal -->
  <div class="main-container">
    <!-- Barre latérale gauche (hubs) -->
    <nav class="left-sidebar" id="left-sidebar" aria-label="Navigation principale">
      <!-- Accueil -->
      <div class="sidebar-section">
        <a href="#" class="sidebar-item active" id="nav-home" data-nav="home" title="Accueil">
          <span class="sidebar-icon"><i class="fa-solid fa-house"></i></span>
          <span>Accueil</span>
        </a>
      </div>

      <!-- Hub des utilisateurs -->
      <div class="sidebar-section">
          <div class="sidebar-header">Hub des utilisateurs</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-admin" data-nav="admin">
            <span class="sidebar-icon"><i class="fa-solid fa-id-badge"></i></span> Administration
          </a>
          <a href="#" class="sidebar-item" id="nav-roles" data-nav="roles">
            <span class="sidebar-icon"><i class="fa-solid fa-shield-halved"></i></span> Rôles & permissions
          </a>
          <a href="#" class="sidebar-item" id="nav-teachers" data-nav="teachers">
            <span class="sidebar-icon"><i class="fa-solid fa-chalkboard-user"></i></span> Enseignants
          </a>
          <a href="#" class="sidebar-item" id="nav-students" data-nav="students">
            <span class="sidebar-icon"><i class="fa-solid fa-user"></i></span> Élèves
          </a>
          <a href="#" class="sidebar-item" id="nav-guardians" data-nav="guardians">
            <span class="sidebar-icon"><i class="fa-solid fa-people-roof"></i></span> Parents / Tuteurs
          </a>
        </div>
      </div>

      <!-- Hub des cours -->
      <div class="sidebar-section">
          <div class="sidebar-header">Hub des cours</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-classes" data-nav="classes">
            <span class="sidebar-icon"><i class="fa-solid fa-layer-group"></i></span> Classes & groupes
          </a>
          <a href="#" class="sidebar-item" id="nav-matiere" data-nav="matiere">
            <span class="sidebar-icon"><i class="fa-solid fa-list-check"></i></span> Matières / Programmes
          </a>
          <a href="#" class="sidebar-item" id="nav-lessons" data-nav="lessons">
            <span class="sidebar-icon"><i class="fa-solid fa-notes-medical"></i></span> Cours & leçons
          </a>
          <a href="#" class="sidebar-item" id="nav-assignments" data-nav="assignments">
            <span class="sidebar-icon"><i class="fa-solid fa-clipboard-check"></i></span> Devoirs & évaluations
          </a>
        </div>
      </div>

      <!-- Présence & discipline -->
      <div class="sidebar-section">
          <div class="sidebar-header">Présence & discipline</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-attendance" data-nav="attendance">
            <span class="sidebar-icon"><i class="fa-regular fa-square-check"></i></span> Présences
          </a>
          <a href="#" class="sidebar-item" id="nav-lateness" data-nav="lateness">
            <span class="sidebar-icon"><i class="fa-regular fa-clock"></i></span> Retards & absences
          </a>
          <a href="#" class="sidebar-item" id="nav-discipline" data-nav="discipline">
            <span class="sidebar-icon"><i class="fa-solid fa-scale-balanced"></i></span> Incidents disciplinaires
          </a>
        </div>
      </div>

      <!-- Contenu & ressources -->
      <div class="sidebar-section">
          <div class="sidebar-header">Contenu & ressources</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-library" data-nav="library">
            <span class="sidebar-icon"><i class="fa-solid fa-book"></i></span> Bibliothèque
          </a>
          <a href="#" class="sidebar-item" id="nav-shared" data-nav="shared">
            <span class="sidebar-icon"><i class="fa-solid fa-share-nodes"></i></span> Ressources partagées
          </a>
          <a href="#" class="sidebar-item" id="nav-school-docs" data-nav="school-docs">
            <span class="sidebar-icon"><i class="fa-regular fa-file-lines"></i></span> Documents scolaires
          </a>
        </div>
      </div>

      <!-- Communication -->
      <div class="sidebar-section">
          <div class="sidebar-header">Communication</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-publications" data-nav="publications">
            <span class="sidebar-icon"><i class="fa-regular fa-message"></i></span> Annonces
          </a>
          <a href="#" class="sidebar-item" id="nav-messaging" data-nav="messaging">
            <span class="sidebar-icon"><i class="fa-solid fa-comments"></i></span> Messagerie
          </a>
          <a href="#" class="sidebar-item" id="nav-channels" data-nav="channels">
            <span class="sidebar-icon"><i class="fa-solid fa-paper-plane"></i></span> Canaux externes (Email/SMS/WhatsApp)
          </a>
        </div>
      </div>

      <!-- Calendrier -->
      <div class="sidebar-section">
        <a href="#" class="sidebar-item" id="nav-calendar" data-nav="calendar" title="Calendrier scolaire & événements">
          <span class="sidebar-icon"><i class="fa-regular fa-calendar-days"></i></span>
          <span>Calendrier</span>
        </a>
      </div>

      <!-- Rapports & analyses -->
      <div class="sidebar-section">
          <div class="sidebar-header">Rapports & analyses</div>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-student-progress" data-nav="student-progress">
            <span class="sidebar-icon"><i class="fa-solid fa-chart-simple"></i></span> Progression des élèves
          </a>
          <a href="#" class="sidebar-item" id="nav-teacher-activity" data-nav="teacher-activity">
            <span class="sidebar-icon"><i class="fa-solid fa-user-tie"></i></span> Activité des enseignants
          </a>
          <a href="#" class="sidebar-item" id="nav-attendance-reports" data-nav="attendance-reports">
            <span class="sidebar-icon"><i class="fa-regular fa-square-poll-vertical"></i></span> Rapports de présence
          </a>
          <a href="#" class="sidebar-item" id="nav-exam-reports" data-nav="exam-reports">
            <span class="sidebar-icon"><i class="fa-solid fa-ranking-star"></i></span> Rapports d’examens
          </a>
          <a href="#" class="sidebar-item" id="nav-dashboards" data-nav="dashboards">
            <span class="sidebar-icon"><i class="fa-solid fa-gauge-high"></i></span> Tableaux de bord
          </a>
        </div>
      </div>

      <!-- Importations & intégrations -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <div class="sidebar-header">Importations & intégrations</div>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-import" data-nav="import">
            <span class="sidebar-icon"><i class="fa-solid fa-file-import"></i></span> Import Excel / CSV
          </a>
          <a href="#" class="sidebar-item" id="nav-connectors" data-nav="connectors">
            <span class="sidebar-icon"><i class="fa-solid fa-screwdriver-wrench"></i></span> Connecteurs & API
          </a>
        </div>
      </div>

      <!-- Paramètres de l’établissement -->
      <div class="sidebar-section">
          <div class="sidebar-header">Paramètres de l’établissement</div>

        <div class="sidebar-group">
          <a href="#" class="sidebar-item" id="nav-school-profile" data-nav="school-profile">
            <span class="sidebar-icon"><i class="fa-solid fa-school"></i></span> Profil de l’école
          </a>
          <a href="#" class="sidebar-item" id="nav-school-year" data-nav="school-year">
            <span class="sidebar-icon"><i class="fa-regular fa-calendar"></i></span> Année scolaire
          </a>
          <a href="#" class="sidebar-item" id="nav-branding" data-nav="branding">
            <span class="sidebar-icon"><i class="fa-regular fa-image"></i></span> Identité visuelle
          </a>
          <a href="#" class="sidebar-item" id="nav-platform-settings" data-nav="platform-settings">
            <span class="sidebar-icon"><i class="fa-solid fa-sliders"></i></span> Paramètres de la plateforme
          </a>
        </div>
      </div>

      <!-- Aide & support -->
      <div class="sidebar-section">
          <div class="sidebar-header"> Aide & support</div>

        <div class="sidebar-group" hidden>
          <a href="#" class="sidebar-item" id="nav-help-center" data-nav="help-center">
            <span class="sidebar-icon"><i class="fa-regular fa-circle-question"></i></span> Centre d’aide
          </a>
          <a href="#" class="sidebar-item" id="nav-support" data-nav="support">
            <span class="sidebar-icon"><i class="fa-solid fa-headset"></i></span> Support / Contact
          </a>
        </div>
      </div>
    </nav>

    <!-- Zone centrale -->
    <div class="centered-content">
      <div class="content-container">

        <!-- Accueil (par défaut visible) -->
        <section class="content-section active" id="home">
          <div class="dash-head">
            <h2 class="dash-title">Tableau de bord</h2>
            <div class="dash-overview">Overview</div>
          </div>

          <!-- KPI STRIP -->
          <div class="kpi-grid">
            <div class="kpi-card kpi-gradient-1">
              <div class="kpi-top">
                <span class="kpi-title">Élèves</span>
                <i class="fa-solid fa-user-graduate"></i>
              </div>
              <div class="kpi-value" id="kpi-students">...</div>
              <div class="kpi-trend up">Augmenté de 3%</div>
            </div>

            <div class="kpi-card kpi-gradient-2">
              <div class="kpi-top">
                <span class="kpi-title">Présence aujourd’hui</span>
                <i class="fa-solid fa-user-check"></i>
              </div>
              <div class="kpi-value" id="kpi-attendance">95%</div>
              <div class="kpi-trend down">Diminué de 1%</div>
            </div>

            <div class="kpi-card kpi-gradient-3">
              <div class="kpi-top">
                <span class="kpi-title">Examens à venir</span>
                <i class="fa-solid fa-file-pen"></i>
              </div>
              <div class="kpi-value" id="kpi-exams">...</div>
              <div class="kpi-trend up">+1 ajouté</div>
            </div>

            <div class="kpi-card kpi-gradient-4">
              <div class="kpi-top">
                <span class="kpi-title">Réunions</span>
                <i class="fa-solid fa-handshake"></i>
              </div>
              <div class="kpi-value" id="kpi-meetings">2</div>
              <div class="kpi-trend up">+1 cette semaine</div>
            </div>
          </div>

          <!-- CHARTS ROW -->
          <div class="charts-grid">
            <div class="card chart-card">
              <div class="card-head"><h3>Visit & Sales Statistics</h3></div>
              <canvas id="barStats" height="140"></canvas>
            </div>
            <div class="card chart-card">
              <div class="card-head"><h3>Traffic Sources</h3></div>
              <canvas id="doughnutTraffic" height="140"></canvas>
            </div>
          </div>
        </section>

        <!-- Sections contrôlées par navbar.js (plus d'inline styles) -->
        <section class="content-section" id="admin">
          <h2>Administration</h2>
          <p>This is the Administration section part.</p>
        </section>

        <section class="content-section" id="roles">
          <h2>Rôles & permissions</h2>
          <p>This is the Roles & Permissions section part.</p>
        </section>

        <section class="content-section" id="teachers">
          <h2>Enseignants</h2>
          <p>This is the Teachers section part.</p>
        </section>

        <section class="content-section" id="students">
          <h2>Élèves</h2>
          <p>This is the Students section part.</p>
        </section>

        <section class="content-section" id="guardians">
          <h2>Parents / Tuteurs</h2>
          <p>This is the Guardians section part.</p>
        </section>

        <section class="content-section" id="matiere">
          <h2>Matière / Programmes</h2>
          <ul id="matiere-list"></ul>
        </section>

        <section class="content-section" id="classes">
          <h2>Classes & groupes</h2>
          <p>Gestion des classes.</p>
        </section>

        <section class="content-section" id="lessons">
          <h2>Cours & leçons</h2>
          <p>Gestion des cours & leçons.</p>
        </section>

        <section class="content-section" id="assignments">
          <h2>Devoirs & évaluations</h2>
          <p>Gestion des devoirs.</p>
        </section>

        <section class="content-section" id="attendance">
          <h2>Présences</h2>
          <p>Suivi des présences.</p>
        </section>

        <section class="content-section" id="lateness">
          <h2>Retards & absences</h2>
          <p>Suivi des retards & absences.</p>
        </section>

        <section class="content-section" id="discipline">
          <h2>Incidents disciplinaires</h2>
          <p>Suivi disciplinaire.</p>
        </section>

        <section class="content-section" id="library">
          <h2>Bibliothèque</h2>
          <p>Contenu et ressources.</p>
        </section>

        <section class="content-section" id="shared">
          <h2>Ressources partagées</h2>
          <p>Partage interne.</p>
        </section>

        <section class="content-section" id="school-docs">
          <h2>Documents scolaires</h2>
          <p>Docs de l’établissement.</p>
        </section>

        <section class="content-section" id="publications">
          <h2>🖼 Publications</h2>

          <div
            id="post-composer-host"
            data-component="post-composer"
            data-src="../pages/student-post.html"
            data-selector="form.post-card"
            data-ready="false"
          ></div>

          <div id="feed" class="card" style="margin-top: 14px;">
            <div class="muted">Rien à afficher pour le moment…</div>
          </div>
        </section>

        <section class="content-section" id="messaging">
          <h2>Messagerie</h2>
          <p>Messages internes.</p>
        </section>

        <section class="content-section" id="channels">
          <h2>Canaux externes</h2>
          <p>Email/SMS/WhatsApp.</p>
        </section>

        <section class="content-section" id="calendar">
          <h2>Calendrier</h2>
          <p>Événements & agenda.</p>
        </section>

        <section class="content-section" id="student-progress">
          <h2>Progression des élèves</h2>
          <p>Rapports de progression.</p>
        </section>

        <section class="content-section" id="teacher-activity">
          <h2>Activité des enseignants</h2>
          <p>Suivi de l’activité.</p>
        </section>

        <section class="content-section" id="attendance-reports">
          <h2>Rapports de présence</h2>
          <p>Tableaux & graphiques.</p>
        </section>

        <section class="content-section" id="exam-reports">
          <h2>Rapports d’examens</h2>
          <p>Analyses des examens.</p>
        </section>

        <section class="content-section" id="dashboards">
          <h2>Tableaux de bord</h2>
          <p>KPIs et synthèses.</p>
        </section>

        <section class="content-section" id="import">
          <h2>Import Excel / CSV</h2>
          <p>Importer des données.</p>
        </section>

        <section class="content-section" id="connectors">
          <h2>Connecteurs & API</h2>
          <p>Intégrations.</p>
        </section>

        <section class="content-section" id="school-profile">
          <h2>Profil de l’école</h2>
          <p>Identité de l’établissement.</p>
        </section>

        <section class="content-section" id="school-year">
          <h2>Année scolaire</h2>
          <p>Paramétrage des périodes.</p>
        </section>

        <section class="content-section" id="branding">
          <h2>Identité visuelle</h2>
          <p>Logos & couleurs.</p>
        </section>

        <section class="content-section" id="platform-settings">
          <h2>Paramètres de la plateforme</h2>
          <p>Configuration technique.</p>
        </section>

        <section class="content-section" id="help-center">
          <h2>Centre d’aide</h2>
          <p>FAQ & guides.</p>
        </section>

        <section class="content-section" id="support">
          <h2>Support</h2>
          <p>Assistance & contact.</p>
        </section>

      </div>
    </div>

    <!-- Barre latérale droite (inchangée, optionnelle) -->
    <aside class="right-sidebar" aria-label="Informations complémentaires">
      <div class="widget">
        <div class="widget-content">
          <div id="calendar-mini"></div>
        </div>
      </div>
      <br>
      <div class="widget">
        <div class="widget-header">Urgent</div>
        <div class="widget-content">
          <p><strong>25 mars :</strong> Examen de math</p>
          <p><strong>28 mars :</strong> Réunion de projet</p>
          <p><strong>30 mars :</strong> Remise du rapport</p>
        </div>
      </div>
      <script>
        // Mini calendrier décoratif
        (function () {
          const el = document.getElementById('calendar-mini');
          if (!el) return;
          const now = new Date();
          const month = now.toLocaleString('fr-FR', { month: 'long' });
          el.innerHTML = '<div class="calendar-header"><strong>' + month.charAt(0).toUpperCase() + month.slice(1) + ' ' + now.getFullYear() + '</strong></div>';
        })();
      </script>
    </aside>
  </div>

  <!-- Scripts existants -->
  <script src="../js/notify.js" defer></script>
  <script src="../js/navbar.js"></script>
  <script src="../js/student-app.js"></script>
  <script src="../js/posts.js"></script>
  <script src="../js/matiere.js"></script>
  <script src="../js/kpi.js"></script>
</body>
</html>
