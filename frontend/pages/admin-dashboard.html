<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ClicaEd — Tableau de bord</title>

  <!-- Icons (for nav icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- Optional theme stylesheet (kept separate) -->
  <link rel="stylesheet" href="../css/dashboard.css" />

  <!-- Metadata -->
  <meta name="description" content="Plateforme ClicaEd — gestion scolaire (utilisateurs, cours, présence, communication, rapports).">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <!-- En‑tête -->
  <header class="header" role="banner">
    <div class="logo">ClicaEd</div>
    <div class="search-bar" role="search">
      <input type="text" placeholder="Recherche Clica" aria-label="Rechercher"/>
    </div>
    <div class="user-menu" role="group" aria-label="Menu utilisateur">
      <button class="action-button" type="button"><i class="fas fa-plus"></i> Créer</button>
      <button class="action-button" type="button">Formation</button>
      <div class="user-avatar" aria-hidden="true">U</div>
    </div>
  </header>

  <!-- Conteneur principal -->
<div class="main-container">
    <!-- Barre latérale gauche (refonte en hubs) -->
    <nav class="left-sidebar" aria-label="Navigation principale">
      <!-- Accueil -->
      <div class="sidebar-section">
        <a href="#" class="sidebar-item active" data-nav="home" title="Accueil">
          <span class="sidebar-icon"><i class="fa-solid fa-house"></i></span>
          <span>Accueil</span>
        </a>
      </div>

      <!-- Hub des utilisateurs -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-user-group"></i> Hub des utilisateurs</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="admin">
            <span class="sidebar-icon"><i class="fa-solid fa-id-badge"></i></span> Administration
          </a>
          <a href="#" class="sidebar-item" data-nav="roles">
            <span class="sidebar-icon"><i class="fa-solid fa-shield-halved"></i></span> Rôles & permissions
          </a>
          <a href="#" class="sidebar-item" data-nav="teachers">
            <span class="sidebar-icon"><i class="fa-solid fa-chalkboard-user"></i></span> Enseignants
          </a>
          <a href="#" class="sidebar-item" data-nav="students">
            <span class="sidebar-icon"><i class="fa-solid fa-user"></i></span> Élèves
          </a>
          <a href="#" class="sidebar-item" data-nav="guardians">
            <span class="sidebar-icon"><i class="fa-solid fa-people-roof"></i></span> Parents / Tuteurs
          </a>
        </div>
      </div>

      <!-- Hub des cours -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-book-open"></i> Hub des cours</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="classes">
            <span class="sidebar-icon"><i class="fa-solid fa-layer-group"></i></span> Classes & groupes
          </a>
          <a href="#" class="sidebar-item" data-nav="matiere">
            <span class="sidebar-icon"><i class="fa-solid fa-list-check"></i></span> Matières / Programmes
          </a>
          <a href="#" class="sidebar-item" data-nav="lessons">
            <span class="sidebar-icon"><i class="fa-solid fa-notes-medical"></i></span> Cours & leçons
          </a>
          <a href="#" class="sidebar-item" data-nav="assignments">
            <span class="sidebar-icon"><i class="fa-solid fa-clipboard-check"></i></span> Devoirs & évaluations
          </a>
        </div>
      </div>

      <!-- Présence & discipline -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-user-check"></i> Présence & discipline</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="attendance">
            <span class="sidebar-icon"><i class="fa-regular fa-square-check"></i></span> Présences
          </a>
          <a href="#" class="sidebar-item" data-nav="lateness">
            <span class="sidebar-icon"><i class="fa-regular fa-clock"></i></span> Retards & absences
          </a>
          <a href="#" class="sidebar-item" data-nav="discipline">
            <span class="sidebar-icon"><i class="fa-solid fa-scale-balanced"></i></span> Incidents disciplinaires
          </a>
        </div>
      </div>

      <!-- Contenu & ressources -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-folder-open"></i> Contenu & ressources</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="library">
            <span class="sidebar-icon"><i class="fa-solid fa-book"></i></span> Bibliothèque
          </a>
          <a href="#" class="sidebar-item" data-nav="shared">
            <span class="sidebar-icon"><i class="fa-solid fa-share-nodes"></i></span> Ressources partagées
          </a>
          <a href="#" class="sidebar-item" data-nav="school-docs">
            <span class="sidebar-icon"><i class="fa-regular fa-file-lines"></i></span> Documents scolaires
          </a>
        </div>
      </div>

      <!-- Communication -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-bullhorn"></i> Communication</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="announcements">
            <span class="sidebar-icon"><i class="fa-regular fa-message"></i></span> Annonces
          </a>
          <a href="#" class="sidebar-item" data-nav="messaging">
            <span class="sidebar-icon"><i class="fa-solid fa-comments"></i></span> Messagerie
          </a>
          <a href="#" class="sidebar-item" data-nav="channels">
            <span class="sidebar-icon"><i class="fa-solid fa-paper-plane"></i></span> Canaux externes (Email/SMS/WhatsApp)
          </a>
        </div>
      </div>

      <!-- Calendrier -->
      <div class="sidebar-section">
        <a href="#" class="sidebar-item" data-nav="calendar" title="Calendrier scolaire & événements">
          <span class="sidebar-icon"><i class="fa-regular fa-calendar-days"></i></span>
          <span>Calendrier</span>
        </a>
      </div>

      <!-- Rapports & analyses -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-chart-line"></i> Rapports & analyses</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="student-progress">
            <span class="sidebar-icon"><i class="fa-solid fa-chart-simple"></i></span> Progression des élèves
          </a>
          <a href="#" class="sidebar-item" data-nav="teacher-activity">
            <span class="sidebar-icon"><i class="fa-solid fa-user-tie"></i></span> Activité des enseignants
          </a>
          <a href="#" class="sidebar-item" data-nav="attendance-reports">
            <span class="sidebar-icon"><i class="fa-regular fa-square-poll-vertical"></i></span> Rapports de présence
          </a>
          <a href="#" class="sidebar-item" data-nav="exam-reports">
            <span class="sidebar-icon"><i class="fa-solid fa-ranking-star"></i></span> Rapports d’examens
          </a>
          <a href="#" class="sidebar-item" data-nav="dashboards">
            <span class="sidebar-icon"><i class="fa-solid fa-gauge-high"></i></span> Tableaux de bord
          </a>
        </div>
      </div>

      <!-- Importations & intégrations -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-plug"></i> Importations & intégrations</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="import">
            <span class="sidebar-icon"><i class="fa-solid fa-file-import"></i></span> Import Excel / CSV
          </a>
          <a href="#" class="sidebar-item" data-nav="connectors">
            <span class="sidebar-icon"><i class="fa-solid fa-screwdriver-wrench"></i></span> Connecteurs & API
          </a>
        </div>
      </div>

      <!-- Paramètres de l’établissement -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="true">
          <span><i class="fa-solid fa-gear"></i> Paramètres de l’établissement</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group">
          <a href="#" class="sidebar-item" data-nav="school-profile">
            <span class="sidebar-icon"><i class="fa-solid fa-school"></i></span> Profil de l’école
          </a>
          <a href="#" class="sidebar-item" data-nav="school-year">
            <span class="sidebar-icon"><i class="fa-regular fa-calendar"></i></span> Année scolaire
          </a>
          <a href="#" class="sidebar-item" data-nav="branding">
            <span class="sidebar-icon"><i class="fa-regular fa-image"></i></span> Identité visuelle
          </a>
          <a href="#" class="sidebar-item" data-nav="platform-settings">
            <span class="sidebar-icon"><i class="fa-solid fa-sliders"></i></span> Paramètres de la plateforme
          </a>
        </div>
      </div>

      <!-- Aide & support -->
      <div class="sidebar-section">
        <button class="sidebar-header collapsible" type="button" aria-expanded="false">
          <span><i class="fa-solid fa-circle-info"></i> Aide & support</span>
          <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
        </button>
        <div class="sidebar-group" hidden>
          <a href="#" class="sidebar-item" data-nav="help-center">
            <span class="sidebar-icon"><i class="fa-regular fa-circle-question"></i></span> Centre d’aide
          </a>
          <a href="#" class="sidebar-item" data-nav="support">
            <span class="sidebar-icon"><i class="fa-solid fa-headset"></i></span> Support / Contact
          </a>
        </div>
      </div>
    </nav>

    
    <!-- Zone centrale -->
    <div class="centered-content">
      <div class="content-container">

        <!-- Accueil -->
      <section class="content-section" id="home" style="display:block;">
        <div class="dash-head">
          <h2 class="dash-title">Tableau de bord</h2>
          <div class="dash-overview">Overview</div>
        </div>

        <!-- KPI STRIP -->
        <div class="kpi-grid">
          <div class="kpi-card kpi-gradient-1">
            <div class="kpi-top">
              <span class="kpi-title">Élèves</span>
              <i class="fa-solid fa-user-graduate"></i>
            </div>
            <div class="kpi-value" id="kpi-students">...</div>
            <div class="kpi-trend up">Augmenté de 3%</div>
          </div>

          <div class="kpi-card kpi-gradient-2">
            <div class="kpi-top">
              <span class="kpi-title">Présence aujourd’hui</span>
              <i class="fa-solid fa-user-check"></i>
            </div>
            <div class="kpi-value" id="kpi-attendance">95%</div>
            <div class="kpi-trend down">Diminué de 1%</div>
          </div>

          <div class="kpi-card kpi-gradient-3">
            <div class="kpi-top">
              <span class="kpi-title">Examens à venir</span>
              <i class="fa-solid fa-file-pen"></i>
            </div>
            <div class="kpi-value" id="kpi-exams">...</div>
            <div class="kpi-trend up">+1 ajouté</div>
          </div>

          <div class="kpi-card kpi-gradient-4">
            <div class="kpi-top">
              <span class="kpi-title">Réunions</span>
              <i class="fa-solid fa-handshake"></i>
            </div>
            <div class="kpi-value" id="kpi-meetings">2</div>
            <div class="kpi-trend up">+1 cette semaine</div>
          </div>
        </div>

        <!-- CHARTS ROW -->
        <div class="charts-grid">
          <div class="card chart-card">
            <div class="card-head"><h3>Visit & Sales Statistics</h3></div>
            <canvas id="barStats" height="140"></canvas>
          </div>
          <div class="card chart-card">
            <div class="card-head"><h3>Traffic Sources</h3></div>
            <canvas id="doughnutTraffic" height="140"></canvas>
          </div>
        </div>
      </section>
        <!-- Administration -->
        <section class="content-section" id="admin" style="display:none;">
          <h2>Administration</h2>
          <p>This is the Administration section part.</p>
        </section>

        <!-- Rôles & permissions -->
        <section class="content-section" id="roles" style="display:none;">
          <h2>Rôles & permissions</h2>
          <p>This is the Roles & Permissions section part.</p>
        </section>

        <!-- Enseignants -->
        <section class="content-section" id="teachers" style="display:none;">
          <h2>Enseignants</h2>
          <p>This is the Teachers section part.</p>
        </section>

        <!-- Élèves -->
        <section class="content-section" id="students" style="display:none;">
          <h2>Élèves</h2>
          <p>This is the Students section part.</p>
        </section>

        <!-- Parents -->
        <section class="content-section" id="guardians" style="display:none;">
          <h2>Parents / Tuteurs</h2>
          <p>This is the Guardians section part.</p>
        </section>

        <!-- Matiere / Programme -->
        <section class="content-section" id="matiere" style="display:none;">
            <h2>Matiere / Programmes</h2>
            <ul id="matiere-list"></ul>
        </section>


      </div>
    </div>
    
    <!-- Barre latérale droite (facultative) -->
    <aside class="right-sidebar" aria-label="Informations complémentaires">
      <div class="widget">
        <div class="widget-content">
          <div id="calendar"></div>
        </div>
      </div>
      <br>
      <div class="widget">
        <div class="widget-header">Urgent</div>
        <div class="widget-content">
          <p><strong>25 mars :</strong> Examen de math</p>
          <p><strong>28 mars :</strong> Réunion de projet</p>
          <p><strong>30 mars :</strong> Remise du rapport</p>
        </div>
      </div>
      <script>
        // Simple real-time calendar (month view)
        function renderCalendar() {
          const calendarEl = document.getElementById('calendar');
          const now = new Date();
          const month = now.getMonth();
          const year = now.getFullYear();

          // Get month name in French
          const monthNames = [
            "Janvier", "Février", "Mars", "Avril", "Mai", "Juin",
            "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"
          ];
          const daysShort = ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"];

          // First day of month
          const firstDay = new Date(year, month, 1);
          // Last day of month
          const lastDay = new Date(year, month + 1, 0);

          let html = `<div class="calendar-header"><strong>${monthNames[month]} ${year}</strong></div>`;
          html += `<table class="calendar-table"><thead><tr>`;
          daysShort.forEach(day => html += `<th>${day}</th>`);
          html += `</tr></thead><tbody><tr>`;

          // Fill empty cells before first day
          let startDay = firstDay.getDay(); // Sunday=0
          startDay = startDay === 0 ? 6 : startDay - 1; // Make Monday=0
          for (let i = 0; i < startDay; i++) html += `<td></td>`;

          // Fill days
          for (let d = 1; d <= lastDay.getDate(); d++) {
            const today = (d === now.getDate());
            html += `<td${today ? ' class="calendar-today"' : ''}>${d}</td>`;
            if ((startDay + d) % 7 === 0 && d !== lastDay.getDate()) html += `</tr><tr>`;
          }

          // Fill empty cells after last day
          let endDay = (startDay + lastDay.getDate()) % 7;
          if (endDay !== 0) for (let i = endDay; i < 7; i++) html += `<td></td>`;
          html += `</tr></tbody></table>`;

          calendarEl.innerHTML = html;
        }

        // Basic styles for calendar
        const style = document.createElement('style');
        style.textContent = `
          .calendar-header { text-align:center; margin-bottom:8px; }
          .calendar-table { width:100%; border-collapse:collapse; font-size:0.95em; }
          .calendar-table th, .calendar-table td { border:1px solid #eee; width:14%; height:28px; text-align:center; }
          .calendar-today { background:#0078d4; color:#fff; border-radius:50%; }
        `;
        document.head.appendChild(style);

        renderCalendar();
      </script>
    </aside>

  <!-- Optional separate scripts -->
  <script src="../js/navbar.js"></script>
  <script src="../js/matiere.js"></script>
  <script src="../js/kpi.js"></script>

</body>
</html>
