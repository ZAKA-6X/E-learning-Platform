/* ======= ClicaEd – Teacher Dashboard (Main CSS) ======= */
/* Design tokens */
:root{
  --bg: #0f172a;             /* slate-900 */
  --surface: #111827;        /* gray-900 */
  --surface-2:#0b1222;       /* deep panel */
  --panel: #0b132b;
  --elev: #0b1222;
  --card: #101828;
  --muted:#94a3b8;           /* slate-400 */
  --text:#e5e7eb;            /* gray-200 */
  --title:#f8fafc;           /* slate-50 */
  --brand:#6366f1;           /* indigo-500 */
  --brand-2:#22d3ee;         /* cyan-400 */
  --ok:#22c55e;
  --warn:#f59e0b;
  --err:#ef4444;
  --bd:#1f2937;              /* gray-800 */
  --bd-2:#263142;
  --chip:#0b132b;
  --input:#0b1222;
  --ring: 0 0 0 3px rgba(99,102,241,.35);

  --radius:16px;
  --r-sm:10px;
  --r-lg:22px;

  --shadow-sm: 0 4px 12px rgba(0,0,0,.25);
  --shadow-md: 0 10px 30px rgba(0,0,0,.35);

  --gap: 16px;
  --gap-lg: 24px;
}

@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f7fb;
    --surface:#ffffff;
    --surface-2:#ffffff;
    --panel:#ffffff;
    --elev:#ffffff;
    --card:#ffffff;
    --text:#0f172a;
    --title:#0b1222;
    --muted:#6b7280;
    --bd:#e5e7eb;
    --bd-2:#e2e8f0;
    --chip:#f1f5f9;
    --input:#ffffff;
    --shadow-sm: 0 6px 16px rgba(0,0,0,.08);
    --shadow-md: 0 16px 40px rgba(0,0,0,.12);
  }
}

/* Global reset & base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 10% -10%, rgba(34,211,238,.12), transparent 55%),
    radial-gradient(1000px 700px at 90% 10%, rgba(99,102,241,.12), transparent 55%),
    linear-gradient(180deg, rgba(2,6,23,.8), rgba(2,6,23,.8)), var(--bg);
  line-height:1.5;
}

/* Utilities */
.hidden{display:none !important}
.muted{color:var(--muted)}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Focus */
:where(a,button,input,select){
  outline:none;
}
:where(a,button,input,select):focus-visible{
  box-shadow: var(--ring);
  border-color: color-mix(in oklab, var(--brand), white 10%);
}

/* Header */
.header{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  gap:16px;
  padding:14px 18px;
  background:rgba(11,19,43,.7);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--bd);
}
.header-brand{display:flex;align-items:center;gap:12px}
.header .logo{
  display:inline-flex; align-items:center; gap:10px; text-decoration:none; color:var(--title);
  font-weight:700; font-size:18px;
}
.header .logo img{height:28px;width:auto;display:block}

.mobile-nav-toggle{
  display:inline-grid; place-items:center;
  height:40px;width:40px;border-radius:12px;border:1px solid var(--bd);
  background:var(--chip); color:var(--title); cursor:pointer;
}
.mobile-nav-toggle i{font-size:16px}

.search-bar{
  flex:1; max-width:620px; margin-inline:auto;
  display:flex; align-items:center;
  background:var(--input); border:1px solid var(--bd); border-radius:14px; padding:0 12px;
}
.search-bar input{
  width:100%; background:transparent; border:0; color:var(--text);
  padding:12px 6px; font-size:14px;
}

.user-menu{display:flex;align-items:center;gap:10px}
.user-avatar{
  height:36px;width:36px;border-radius:50%;
  display:inline-grid;place-items:center;
  background:linear-gradient(135deg,var(--brand),var(--brand-2));
  color:white; text-decoration:none; font-weight:700;
}

/* Main Layout */
.main-container{
  display:grid;
  grid-template-columns: 260px 1fr;
  gap:0;
  min-height: calc(100vh - 68px);
}

/* Left Sidebar */
.left-sidebar{
  position:sticky; top:68px;
  height: calc(100vh - 68px);
  padding:14px;
  background:linear-gradient(180deg,var(--panel), transparent 140%);
  border-right:1px solid var(--bd);
  display:flex; flex-direction:column; gap:6px;
}
.sidebar-item{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px; border-radius:12px; color:var(--text);
  text-decoration:none; border:1px solid transparent;
}
.sidebar-item .sidebar-icon{width:22px; display:inline-grid; place-items:center}
.sidebar-item:hover{background:color-mix(in oklab, var(--chip), white 6%); border-color:var(--bd)}
.sidebar-item.active{
  background:linear-gradient(135deg, color-mix(in oklab, var(--brand) 18%, transparent), color-mix(in oklab, var(--brand-2) 12%, transparent));
  border-color: color-mix(in oklab, var(--brand) 40%, var(--bd));
}

/* Content area wrapper */
.centered-content{
  display:flex; justify-content:center; padding:20px;
}
.content-container{
  width:min(1200px, 100%);
}
.content-area{
  background: color-mix(in oklab, var(--elev), transparent 0%);
  border:1px solid var(--bd);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 18px;
}

/* Section header: Mes cours */
.courses-header{
  display:flex; align-items:center; justify-content:space-between; gap:16px;
  margin-bottom: 14px;
}
.courses-header h2{
  margin:0; font-size:22px; color:var(--title);
}
.courses-header .meta{margin-top:2px}

.actions-wrap{display:flex; align-items:center; gap:10px}

/* Small search inside header right */
.search-wrap{
  display:flex; align-items:center; gap:8px; padding:8px 10px;
  border:1px solid var(--bd); border-radius:12px; background:var(--input);
}
.search-wrap input{
  border:0; background:transparent; color:var(--text); width:200px;
}

/* View toggle */
.view-toggle{
  display:inline-flex; gap:8px; padding:6px; border:1px solid var(--bd); border-radius:12px; background:var(--chip);
}
.view-btn{
  height:34px;width:38px; display:inline-grid; place-items:center;
  border:1px solid transparent; border-radius:10px; background:transparent; color:var(--text); cursor:pointer;
}
.view-btn.active{ background: color-mix(in oklab, var(--brand) 18%, transparent); border-color: color-mix(in oklab, var(--brand) 30%, var(--bd)) }

/* Context summary chips */
.context-summary{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  margin: 6px 0 12px;
}
.chips{display:flex; flex-wrap:wrap; gap:8px}
.chip{
  border:1px solid var(--bd);
  background: var(--chip);
  color: var(--text);
  padding:6px 10px; border-radius:999px; font-size:12px;
}

/* Toolbar (filters) */
.toolbar{
  display:flex; flex-wrap:wrap; gap:10px; margin-bottom:14px;
}
.row-wrap{row-gap:10px}
.select-wrap{
  display:flex; align-items:center; gap:8px;
  padding:8px 10px; border:1px solid var(--bd); border-radius:12px; background:var(--input);
}
.select-wrap i{opacity:.85}
.select-wrap select{
  appearance:none; background:transparent; color:var(--text);
  border:0; padding-right:20px; min-width:210px;
}

/* Course grid */
.course-grid{
  display:grid; gap:14px;
  grid-template-columns: repeat( auto-fill, minmax(240px, 1fr) );
}

/* Course card */
.course-card{
  position:relative;
  border:1px solid var(--bd);
  background: linear-gradient(180deg, color-mix(in oklab, var(--card), transparent 0%), color-mix(in oklab, var(--card), black 6%));
  border-radius: 18px;
  padding:14px;
  min-height:120px;
  box-shadow: var(--shadow-sm);
  overflow:hidden;
}
.course-card::after{
  content:"";
  position:absolute; inset:auto -40px -40px auto;
  height:120px;width:120px; border-radius:50%;
  background: radial-gradient(closest-side, color-mix(in oklab, var(--brand) 25%, transparent), transparent);
  opacity:.28; pointer-events:none;
}
.course-card:hover{transform: translateY(-1px); transition:transform .18s ease}

/* Skeletons */
.skeleton{
  background: linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.12), rgba(255,255,255,.06));
  background-size: 200% 100%;
  animation: shimmer 1.1s linear infinite;
  border-color: transparent !important;
}
@keyframes shimmer{
  0%{background-position: 0% 0}
  100%{background-position: -200% 0}
}

/* Empty states */
.empty-state{
  text-align:center; padding:36px 12px; color:var(--muted);
}
.empty-illustration{font-size:40px; margin-bottom:10px}

/* Buttons */
.btn-secondary{
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid var(--bd); background:var(--chip);
  color:var(--text); padding:8px 12px; border-radius:10px; cursor:pointer;
}
.btn-secondary.small{padding:6px 10px; font-size:13px}
.btn-secondary:disabled{opacity:.55; cursor:not-allowed}

/* Course detail (offering) */
.course-detail{
  margin-top: 16px;
  border:1px solid var(--bd);
  border-radius:18px; overflow:hidden;
  background:var(--surface-2);
  box-shadow: var(--shadow-sm);
}
.course-detail__hero{
  padding:14px;
  background:
    radial-gradient(900px 300px at 0% -30%, rgba(34,211,238,.18), transparent 60%),
    radial-gradient(900px 300px at 100% -40%, rgba(99,102,241,.18), transparent 60%),
    linear-gradient(180deg, color-mix(in oklab, var(--panel), transparent), color-mix(in oklab, var(--panel), black 8%));
  border-bottom:1px solid var(--bd);
}
.course-detail__hero-top{
  display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;
}
.course-detail__status{
  font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid var(--bd);
  background:var(--chip); color:var(--muted);
}
.course-detail__hero-main{
  display:grid; grid-template-columns: 56px 1fr auto; align-items:center; gap:12px;
}
.course-detail__icon{
  height:56px;width:56px; border-radius:14px; display:grid; place-items:center;
  background:linear-gradient(135deg, color-mix(in oklab, var(--brand) 18%, transparent), color-mix(in oklab, var(--brand-2) 12%, transparent));
  color:white; border:1px solid color-mix(in oklab, var(--brand) 40%, var(--bd));
}
.course-detail__breadcrumb{color:var(--muted); font-size:13px}
.course-detail__title{margin:2px 0 4px; font-size:20px; color:var(--title)}
.course-detail__subtitle{margin:0; color:var(--muted)}
.course-detail__search{
  display:flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--bd); border-radius:12px; background:var(--input);
}
.course-detail__search input{
  border:0; background:transparent; color:var(--text); width:260px;
}

/* Detail body */
.course-detail__body{padding:14px}
.course-detail__loading{
  display:grid; place-items:center; gap:10px; padding:36px 10px; color:var(--muted);
}
.loader{
  width:38px;height:38px; border-radius:50%;
  border:3px solid color-mix(in oklab, var(--brand), transparent 70%);
  border-top-color: var(--brand);
  animation: spin .8s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

.course-detail__content{display:block}
.course-block{background:var(--surface); border:1px solid var(--bd); border-radius:14px; padding:12px}
.course-block__header{
  display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;
}
.course-block__header--tight{margin-bottom:8px}
.course-block__title-wrap{display:flex; align-items:center; gap:10px}
.course-block__count{
  padding:2px 8px; border-radius:999px; border:1px solid var(--bd); color:var(--muted); font-size:12px;
}
.course-block__action{white-space:nowrap}
.course-block__empty{padding:18px 8px; color:var(--muted)}

.resource-grid{
  display:grid; gap:10px;
  grid-template-columns: repeat( auto-fill, minmax(180px, 1fr) );
}
.resource-grid > .resource{
  border:1px solid var(--bd); border-radius:12px; padding:10px; background:var(--card);
}

/* Error */
.course-detail__error{
  margin-top:10px;
  padding:12px; border-radius:12px; border:1px solid color-mix(in oklab, var(--err), var(--bd) 40%);
  background: color-mix(in oklab, var(--err) 8%, transparent);
  color: color-mix(in oklab, var(--err), white 15%);
}

/* States helpers */
.content-section{display:none}
.content-section.active{display:block}
.rail{display:none}
.rail.active{display:block}

/* Responsive */
@media (max-width: 1100px){
  .main-container{grid-template-columns: 72px 1fr}
  .left-sidebar{padding:10px}
  .sidebar-item{justify-content:center}
  .sidebar-item span:not(.sidebar-icon){display:none}
}
@media (max-width: 860px){
  .header{gap:10px}
  .search-bar{max-width:none}
  .course-detail__hero-main{grid-template-columns: 48px 1fr; grid-auto-rows:auto}
  .course-detail__search{grid-column: 1 / -1}
}
@media (max-width: 720px){
  .centered-content{padding:14px}
  .content-area{padding:12px}
  .courses-header{flex-direction:column; align-items:flex-start}
  .search-wrap input{width:160px}
  .select-wrap select{min-width:160px}
}
@media (max-width: 540px){
  .main-container{grid-template-columns: 1fr}
  .left-sidebar{
    position:fixed; inset:68px 0 auto 0; height:auto; display:none; z-index:60;
    border-right:0; border-bottom:1px solid var(--bd); background:var(--panel)
  }
  .left-sidebar.open{display:flex}
  .mobile-nav-toggle[aria-expanded="true"]{box-shadow: var(--ring)}
}

/* List view variant (toggle via JS: add .list-view on .course-grid) */
.course-grid.list-view{display:block}
.course-grid.list-view .course-card{display:grid; grid-template-columns: 1fr auto; align-items:center}

/* Inputs – placeholder colors */
::placeholder{color:color-mix(in oklab, var(--muted), white 10%)}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important; transition:none !important}
}
